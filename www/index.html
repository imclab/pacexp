<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>PacMaze Experiment - Pacmaze1 a pacman in a maze</title>
		<meta charset="utf-8">
		<!-- make favicon.ico -->
		<link rel="shortcut icon" href="images/favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/index.css" />
	</head>
	<body>
		<!-- es5-shim.js to patch missing standard functions - needed for Function.bind() in safari -->
		<script src='vendor/es5-shim.js'></script>

<!--		<script src="vendor/firebugx.js"></script>
-->		
		<script src='vendor/jquery/jquery.min.js'></script>
		<script src='vendor/jquery/jquery.url.js'></script>
		<script src='vendor/jquery/jquery.cookie.js'></script>
		<script src='vendor/jquery/jquery.labelify.js'></script>
		<script src='vendor/jquery/jqModal.js'></script>
		<link	href='vendor/jquery/jqModal.css'	rel='stylesheet'></link>

		<script type="text/javascript" src="vendor/three.js.new/build/Three.js"></script>
		<script type="text/javascript" src="vendor/three.js.new/contrib/Detector.js"></script>
		<script type="text/javascript" src="vendor/three.js.new/contrib/RequestAnimationFrame.js"></script>
		<script type="text/javascript" src="vendor/three.js.new/contrib/Stats.js"></script>

		<script src="vendor/socket.io-client/socket.io.js"></script>

		<!-- TODO put excanvas in threex -->
		<script type="text/javascript" src="vendor/excanvas.js"></script>
		<script type="text/javascript" src="js/Threex/Threex.WindowResize.js"></script>
		<script type="text/javascript" src="js/Threex/Threex.TextureSmiley.js"></script>
		<script type="text/javascript" src="js/Threex/Threex.Tween.js"></script>

		<script type="text/javascript" src="js/microevent.js"></script>
		<script type="text/javascript" src="../lib/configProject.js"></script>
		<script type="text/javascript" src="js/configCli.js"></script>
		<script type="text/javascript" src="js/gameCli.js"></script>
		<script type="text/javascript" src="js/config.js"></script>
		<script type="text/javascript" src="js/mazeCli.js"></script>
		<script type="text/javascript" src="js/playerCli.js"></script>
		<script type="text/javascript" src="js/enemyCli.js"></script>
		<script type="text/javascript" src="js/shootCli.js"></script>
		<script type="text/javascript" src="js/pillCli.js"></script>
		<script type="text/javascript" src="js/visualFxImpact.js"></script>
		<script type="text/javascript" src="js/visualFxEmergencyLight.js"></script>
		<script type="text/javascript" src="js/soundRender.js"></script>
		<script type="text/javascript" src="js/cameraRender.js"></script>
		<script type="text/javascript" src="js/minimapRender.js"></script>
		<script type="text/javascript" src="js/webglRender.js"></script>
		
		<!-- To get Soundmanager -->
		<script src="vendor/soundmanager2/script/soundmanager2.js"></script>
		<script>soundManager.url = 'vendor/soundmanager2/swf'; // FIXME ? could it be a dataUrl </script>
		<script>soundManager.debugMode		= false;</script>
		<script>soundManager.useHTML5Audio	= true;	</script>

	
		<script src="js/client.js"></script>


		<script>
		"use strict";
		jQuery(function(){	main();	})
		</script>
		
		<div id="pageContainer">
				<div class="above3d pagetitle" style="margin-left: -20%; width: 600px;">
					<!--
					- this title is too large on small embeded iframe
					- this trick in window.resize make it proportional...
					  jQuery("body").css('font-size', window.innerWidth/80);
					- not sure if it is a good thing or not
					-->
					<a href="http://notes.jetienne.com/2011/04/20/pacmaze-v2-even-more-WebGL-in-pacman.html" target='_blank'>Pacmaze Experiment</a>
				</div>
				<div id="canvasContainer"></div> 
		</div>

		<!-- menuosd -->
		<div style="position: absolute; top:10px; left:10px;" class="above3d menuosd">
			<span id="scoreMenuLine" class="line">
				Score : <span class="value"></span>
			</span>
			<span id="energyMenuLine" class="line">
				Energy : <span class="value"></span>
			</span>
			<span id="usernameMenuLine" class="line" style="display: none">
				<a href="javascript:void(0)" id="usernameButton">Username : <span class="value"></span></a>
			</span>
			<span id="gameIdMenuLine" class="line" style="display: none">
				<a href="javascript:void(0)" id="gameIdButton">Maze : <span class="value"></span></a>
			</span>
			<span id="screenshotMenuLine" class="line" style="display: none">
				<a href="javascript:void(0)" id="ScreenshotButton">Screenshot</a>
			</span>
			<span id="soundTrackMenuLine" class="line" style="display: none">
				<a href="javascript:void(0)" id="soundTrackButton">Sound Track <span class="value">Off</span></a>
			</span>
			<span id="soundFxMenuLine" class="line" style="display: none">
				<a href="javascript:void(0)" id="soundFxButton">Sound Fx <span class="value">Off</span></a>
			</span>
			<span id="inviteFriendsMenuLine" class="line">
				<a href="http://twitter.com/share" data-text="Pacmaze is really fun!! Pacman in 3D ? crazy! Check it out!!" class="twitter-share-button" data-count="none">Tweet</a>
				<!--<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
				--><span>Share</span>
			</span>
			<span id="aboutMenuLine" class="line" style="display: none">
				<a href="javascript:void(0)" id="aboutButton">About</a>
			</span>
		</div>


		<div style="position: absolute; bottom:10px; right:10px;" class="above3d menuosd">
			by <a href="http://twitter.com/jerome_etienne" target='_blank'>@jerome_etienne</a>
		</div>
		<!-- username dialog -->
		<div id="usernameDialog" class="promptDialog jqmWindow above3d" style="margin-left: -120px; width: 240px;">
			Your Twitter Username<br/>
			<input type="text" size=15 name="username" placeholder="twitter username...">
			<div style='font-size: 60%; float: right;'>
				<a class='reset' href='javascript:void(0)'>reset</a>
			</div>
		</div>
		<!-- chat dialog -->
		<div id="chatDialog" class="promptDialog jqmWindow above3d" style="margin-left: -120px; width: 240px;">
			What do you wanna say ?<br/>
			<input type="text" size=15 name="status" placeholder="twitter username...">
		</div>
		<!-- gameId dialog -->
		<div id="gameIdDialog" class="promptDialog jqmWindow above3d" style="margin-left: -120px; width: 240px;">
			Name your maze<br/>
			<input type="text" size=15 name="gameId" placeholder="maze name...">
		</div>
		<!-- inlineHelp dialog -->
		<div id="aboutDialog" class="jqmWindow above3d" style="margin-left: -240px; width: 480px;">
			<div style="float: right;">
				<a href="http://twitter.com/share" data-text="Pacmaze is really fun!! Pacman in 3D ? crazy! Check it out!!" class="twitter-share-button" data-count="none">Tweet</a>
			</div>
			<h3><center><strong>Welcome in Pacmaze</strong></center></h3>
			<p>
				You are a pacman trapped in a maze!
			</p>
			<p>
				Use <strong>Arrows</strong> to move the player.
			</p>
			<p>
				Use <strong>pageUp pageDown</strong> to move the camera.
			</p>
			<p>
				That's it. Have fun :)
			</p>
			<a href="#" class="jqmClose"><em>Close</em></a>
			<!-- hidden <input> to be able to trigger focus and bind keypress on the dialog -->
			<input type="text" style='position: absolute; left: -5000px'>
		</div>
		<!-- follow me on twitter --> 
		<a href="http://www.twitter.com/jerome_etienne"><img class="above3d" style="position: absolute; top: 10px; right: 10px; border: 0;" src="http://twitter-badges.s3.amazonaws.com/follow_me-c.png" alt="Follow jerome_etienne on Twitter"/></a> 
		<!-- gameCompletedNoMorePills dialog -->
		<div id="gameCompletedNoMorePillsDialog" class="jqmWindow above3d" style="margin-left: -240px; width: 480px;">
			<div style="float: right;">
				<a href="http://twitter.com/share" data-text="i had so much fun with pacmaze. I did $SCORE$! beat that" class="twitter-share-button" data-count="none">Tweet</a>
			</div>
			Congratulations! you win! Your score is <span class="score"></span>
			<br/>
			<a href="#" class="jqmClose"><em>Close</em></a>
		</div>
		<!-- gameCompletedNoMorePills dialog -->
		<div id="gameCompletedPlayerKilledDialog" class="jqmWindow above3d" style="margin-left: -240px; width: 480px;">
			<div style="float: right;">
				<a href="http://twitter.com/share" data-text="i had so much fun with pacmaze. I did $SCORE$! beat that" class="twitter-share-button" data-count="none">Tweet</a>
			</div>
			Oh you died... Your score was <span class="score"></span>. Try again ?
			<br/>
			<a href="#" class="jqmClose"><em>Close</em></a>
			<!-- hidden <input> to be able to trigger focus and bind keypress on the dialog -->
			<input type="text" style='position: absolute; left: -5000px'>
		</div>
		<!-- gameCompletedNoMorePills dialog -->
		<div id="noWebGLDialog" class="jqmWindow above3d" style="margin-left: -240px; width: 480px;">
			<h3>Ouch no WebGL :(</h3>
			<p>
				Sorry, WebGL is not available on your computer and WebGL is needed for this game.
				You can read <a href='http://notes.jetienne.com/2011/04/13/pacmaze-v1-release.html' target='_blank'>more about Pacmaze</a>
				or look at a video of the game.
				<!--Go <a href='http://www.khronos.org/webgl/wiki/Getting_a_WebGL_Implementation'>get a WebGL Implementation</a>.
				Or try <a href='?render=canvas'>super experimental/ugly canvas version</a>?-->
			</p>
			<!--<iframe title="YouTube video player" width="480" height="390" src="http://www.youtube.com/embed/9_ZtsK4rU4g" frameborder="0" allowfullscreen></iframe>
			-->
			<a href="#" class="jqmClose"><em>Close</em></a>
		</div>
		
		<!-- google analytic snipet -->
		<script type="text/javascript">
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-4037844-17']);
			_gaq.push(['_trackPageview']); 
			(function() {
			  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		</script>

	</body>
</html>
