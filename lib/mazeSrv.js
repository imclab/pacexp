/** @namespace */
var WebyMaze	= WebyMaze || {};

WebyMaze.MazeSrv	= function(){
	this.cubeW	= 100;

	this.map	= [
		"*****************",
		"*.......*...*.*.*",
		"*.......*.....*.*",
		"*..........**.*.*",
		"*...*.......*...*",
		"*...*.......*...*",
		"*...............*",
		"*...............*",
		"*****************",
	];
	this.mapPacmaze	= [
		"***************************************************************",
		"*.............................................................*",
		"*.............................................................*",
		"*.............................................................*",
		"*.............................................................*",
		"*..*...*......*.....***.*.....................................*",
		"*..*.*.*..**..***..*....*.....................................*",
		"*..*.*.*.*.**.*..*.*.**.*.....................................*",
		"*..*.*.*.**...*..*.*..*.*.....................................*",
		"*...*.*...**..***...***.****..................................*",
		"*.............................................................*",
		"*...............*.........*...................................*",
		"*..*.*..**...**.*..*..***.*...................................*",
		"*..**..*..*.*...*.*..**...*...................................*",
		"*..*...*..*.*...***....**.....................................*",
		"*..*....**...**.*..*.***..*.wr................................*",
		"*.............................................................*",
		"*.............................................................*",
		"***************************************************************",
	];
	
	this.mapPacman1	= [
		"*******************",
		"*........*........*",
		"*.**.***.*.***.**.*",
		"*.**.***.*.***.**.*",
		"*.................*",
		"*.**.*.*****.*.**.*",
		"*....*...*...*....*",
		"****.***.*.***.****",
		"****.*.......*.****",
		"****.*.**.**.*.****",
		".......*...*.......",
		"****.*.*****.*.****",
		"****.*..w.r..*.****",
		"****.*.*****.*.****",
		"*........*........*",
		"*.**.***.*.***.**.*",
		"*..*...........*..*",
		"**.*.*.*****.*.*.**",
		"*....*...*...*....*",
		"*.******.*.******.*",
		"*.................*",
		"*******************",
	];

	this.map	= this.mapPacmaze;
	// rotate the map to make it appears the same in webgl
	var tmp	= [];
	for(var i = 0; i < this.map[0].length; i++ ){
		tmp[i]	= "";
		for(var j = 0; j < this.map.length; j++ ){
			tmp[i]	+= this.map[j][this.map[0].length-1-i];
		}		
	}
	this.map	= tmp;
}

WebyMaze.MazeSrv.PillChars	= ['w', 'r'];
WebyMaze.MazeSrv.isPillChar	= function(mazeChar){
	return WebyMaze.MazeSrv.PillChars.indexOf(mazeChar) != -1
}
WebyMaze.MazeSrv.PillType	= function(mazeChar){
	if( mazeChar === 'w' )	return 'white';
	if( mazeChar === 'r' )	return 'red';
	console.assert(false, "unknown mazeChare "+mazeChar)
	return undefined;
}


WebyMaze.MazeSrv.prototype.getMap	= function(){
	return this.map;
}


// export commonjs module
if( module && module.exports ){
	module.exports	= WebyMaze.MazeSrv;
}
